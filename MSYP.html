<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>èª²è¼”å°å¸«ã€å­¸æœŸé–“å¸¶ç­æ´¥è²¼ã€‘è¨ˆç®—å™¨ - æ°¸å¹³æ ¡ã€ç§€æœ—æ ¡</title>
    

<style>
    body {
        font-family: "Microsoft JhengHei", sans-serif;
        padding: 18px; /* ç•¥å¾®å¢åŠ  padding */
        line-height: 1.5; /* ç•¥å¾®å¢åŠ  line-height */
        background-color: #f4f8f8;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        box-sizing: border-box;
        margin: 0;
        font-size: 1.05em; /* ç•¥å¾®å¢å¤§ body çš„åŸºç¤å­—é«”å¤§å° */
    }
    h2 {
        color: #2c3e50;
        margin-bottom: 12px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        text-align: center;
        font-size: 1.5em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
    }
    .block {
        border: 1px solid #d3d3d3;
        padding: 12px; /* ç•¥å¾®å¢åŠ  padding */
        border-radius: 6px;
        background-color: #fff;
        box-shadow: 1px 1px 3px #e0e0e0;
        margin-bottom: 10px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        width: 100%;
        max-width: 500px;
        box-sizing: border-box;
    }
    .form-row {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-bottom: 6px; /* ç•¥å¾®å¢åŠ  margin-bottom */
    }
    .form-row label {
        flex-shrink: 0;
        width: auto;
        font-weight: bold;
        color: #555;
        font-size: 1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
    }
    .form-row input[type="text"],
    .form-row input[type="number"] {
        flex-grow: 1;
        padding: 6px; /* ç•¥å¾®å¢åŠ  padding */
        border: 1px solid #ccc;
        border-radius: 3px;
        box-sizing: border-box;
        font-size: 1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        width: auto;
        min-width: 60px; /* ç•¥å¾®å¢åŠ  min-width */
    }
    .collapsible-block {
        width: 100%;
        max-width: 500px;
        margin-bottom: 10px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        border: 1px solid #d3d3d3;
        border-radius: 6px;
        background-color: #fff;
        box-shadow: 1px 1px 3px #e0e0e0;
        padding: 12px; /* ç•¥å¾®å¢åŠ  padding */
        box-sizing: border-box;
    }
    .collapsible-block h3 {
        color: #3498db;
        margin-top: 0;
        margin-bottom: 8px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        font-size: 1.1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        cursor: pointer;
    }
    .student-row {
        display: flex;
        gap: 6px; /* ç•¥å¾®å¢åŠ  gap */
        align-items: center;
        margin-bottom: 5px; /* ç•¥å¾®å¢åŠ  margin-bottom */
    }
    .student-row label {
        flex-shrink: 0;
        width: auto;
        font-size: 0.9em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        color: #777;
    }
    .student-row input[type="text"] {
        width: 70px; /* ç•¥å¾®å¢åŠ  width */
        padding: 5px; /* ç•¥å¾®å¢åŠ  padding */
        font-size: 0.9em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
    }
    .student-row input[type="number"] {
        width: 60px; /* ç•¥å¾®å¢åŠ  width */
        padding: 5px; /* ç•¥å¾®å¢åŠ  padding */
        font-size: 0.9em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        flex-grow: 1;
        min-width: 50px; /* ç•¥å¾®å¢åŠ  min-width */
    }
    h3 {
        color: #3498db;
        margin-top: 0;
        margin-bottom: 8px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        font-size: 1.1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
    }
    p {
        color: #777;
        font-size: 0.8em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        margin-top: 3px; /* ç•¥å¾®å¢åŠ  margin-top */
    }
    button {
        padding: 8px 12px; /* ç•¥å¾®å¢åŠ  padding */
        margin-top: 10px; /* ç•¥å¾®å¢åŠ  margin-top */
        font-size: 1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
        cursor: pointer;
        border: none;
        border-radius: 3px;
        color: white;
        background-color: #27ae60;
        transition: background-color 0.3s ease;
    }
    button:hover {
        background-color: #219653;
    }
    pre {
        background: #e7f2f8;
        padding: 10px; /* ç•¥å¾®å¢åŠ  padding */
        border-radius: 3px;
        white-space: pre-wrap;
        font-size: 1.2em; /* è¨ˆç®—çµæœçš„å­—é«”å¤§å° */
        color: #333;
        border: 1px solid #d3d3d3;
        margin-top: 10px; /* ç•¥å¾®å¢åŠ  margin-top */
        width: 100%;
        max-width: 500px;
        box-sizing: border-box;
    }
    .button-container {
        text-align: center;
        margin-bottom: 10px; /* ç•¥å¾®å¢åŠ  margin-bottom */
        width: 100%;
        max-width: 500px;
        box-sizing: border-box;
    }
    #students-content, #leave-info {
        display: none;
        padding-top: 6px; /* ç•¥å¾®å¢åŠ  padding-top */
        font-size: 1em; /* ç•¥å¾®å¢å¤§å­—é«”å¤§å° */
    }
</style>
</head>
<body>

<h2>èª²è¼”å°å¸«ã€å­¸æœŸé–“å¸¶ç­æ´¥è²¼ã€‘è¨ˆç®—å™¨ - æ°¸å¹³æ ¡ã€ç§€æœ—æ ¡</h2>

<div class="block">
    <h3>åŸºæœ¬è³‡è¨Š</h3>
    <div class="form-row">
        <label>ğŸ‘©â€ğŸ« å°å¸«å§“åï¼ˆå¯ä¸å¡«ï¼‰ï¼š</label>
        <input type="text" id="teacherName" placeholder="ä¾‹å¦‚ ç‹è€å¸«">
    </div>
    <div class="form-row">
        <label>ğŸ”¢ å…¨æœˆäººæ•¸ï¼š</label>
        <input type="number" id="fullMonthCount" placeholder="ä¾‹å¦‚ 21" min="15">
    </div>
    <div class="form-row">
        <label>å…¨æœˆæ´¥è²¼æ¯”ä¾‹ï¼š</label>
        <input type="number" id="stipendRatio" value="1" step="0.01">
    </div>
    <p style="font-size: 0.8em; color: #777; margin-left: auto;">æ¯”ä¾‹ = å­¸æœŸé–“å¤©æ•¸ / è©²æœˆå·¥ä½œå¤©æ•¸ã€‚é è¨­ç‚º 1ã€‚</p>
</div>

<div class="collapsible-block">
    <h3 onclick="toggleBlock('leave-info')">â³ æ‰£é™¤è«‹äººä»£èª²çš„æ´¥è²¼</h3>
    <div id="leave-info">
        <div class="form-row">
            <label>ğŸ“… æœ¬æœˆå·¥ä½œå¤©æ•¸ï¼š</label>
            <input type="number" id="workDays" placeholder="ä¾‹å¦‚ 22">
        </div>
        <div class="form-row">
            <label>ğŸ—“ï¸ ä»£èª²å¤©æ•¸ï¼š</label>
            <input type="number" id="leaveDays" placeholder="ä¾‹å¦‚ 1">
        </div>
        <div class="form-row">
            <label>â±ï¸ ä»£èª²å°æ™‚æ•¸ï¼š</label>
            <input type="number" id="leaveHours" placeholder="ä¾‹å¦‚ 3">
        </div>
    </div>
</div>

<div class="collapsible-block">
    <h3 onclick="toggleBlock('students-content')">ğŸ‘¶ éå…¨æœˆå­¸ç”Ÿè³‡è¨Šï¼ˆæœ€å¤šäº”ä½ï¼‰</h3>
    <div id="students-content">
        <div id="students">
            <div class="student-row">
                <label>å§“å1</label>
                <input type="text" id="name0" placeholder="">
                <label>å¯¦ä¸Šå¤©æ•¸</label>
                <input type="number" id="days0" placeholder="">
                <label>æœ¬æœˆå·¥ä½œå¤©</label>
                <input type="number" id="totalDays0" placeholder="">
            </div>
            <div class="student-row">
                <label>å§“å2</label>
                <input type="text" id="name1" placeholder="">
                <label>å¯¦ä¸Šå¤©æ•¸</label>
                <input type="number" id="days1" placeholder="">
                <label>æœ¬æœˆå·¥ä½œå¤©</label>
                <input type="number" id="totalDays1" placeholder="">
            </div>
            <div class="student-row">
                <label>å§“å3</label>
                <input type="text" id="name2" placeholder="">
                <label>å¯¦ä¸Šå¤©æ•¸</label>
                <input type="number" id="days2" placeholder="">
                <label>æœ¬æœˆå·¥ä½œå¤©</label>
                <input type="number" id="totalDays2" placeholder="">
            </div>
            <div class="student-row">
                <label>å§“å4</label>
                <input type="text" id="name3" placeholder="">
                <label>å¯¦ä¸Šå¤©æ•¸</label>
                <input type="number" id="days3" placeholder="">
                <label>æœ¬æœˆå·¥ä½œå¤©</label>
                <input type="number" id="totalDays3" placeholder="">
            </div>
            <div class="student-row">
                <label>å§“å5</label>
                <input type="text" id="name4" placeholder="">
                <label>å¯¦ä¸Šå¤©æ•¸</label>
                <input type="number" id="days4" placeholder="">
                <label>æœ¬æœˆå·¥ä½œå¤©</label>
                <input type="number" id="totalDays4" placeholder="">
            </div>
        </div>
    </div>
</div>

<div class="button-container">
    <button onclick="calculate()">âœ… è¨ˆç®—æ´¥è²¼</button>
    <button onclick="copyResult()" style="background-color: #3498db; margin-left: 10px;">ğŸ“‹ è¤‡è£½çµæœ</button>
</div>

<h3>ğŸ’° è¨ˆç®—çµæœï¼š</h3>
<pre id="result"></pre>

<script>
    // ---------------------- ä¿®æ”¹å…¨æœˆäººæ•¸å°æ‡‰æ´¥è²¼çš„ç´šè·å¾é€™è£¡é–‹å§‹ ----------------------
 function getStipendByCount(count) {
  const stipendMap = {
    16: 600,
    17: 1200,
    18: 1800,
    19: 2400,
    20: 3000,
    21: 4200,
    22: 4900,
    23: 5600,
    24: 6300,
    25: 7000,
    26: 8800,
    27: 9600,
    28: 10400,
    29: 11200,
    30: 12000,
    31: 12800,
    32: 13600,
    33: 14400,
    34: 15200,
    35: 16000,
  };

  if (count in stipendMap) {
    return stipendMap[count];
  } else if (count < 16) {
    return 0;
  } else {
    // å¦‚æœäººæ•¸è¶…é 35ï¼Œå‰‡å›å‚³ 35 äººå°æ‡‰çš„æ´¥è²¼
    return stipendMap[35];
  }
}
    // ---------------------- ä¿®æ”¹å…¨æœˆäººæ•¸å°æ‡‰æ´¥è²¼çš„ç´šè·åˆ°é€™è£¡çµæŸ ----------------------

    // ---------------------- ä¿®æ”¹éå…¨æœˆå­¸ç”Ÿäººæ•¸å°æ‡‰å€‹åˆ¥æ´¥è²¼çš„ç´šè·å¾é€™è£¡é–‹å§‹ ----------------------
    function getPerStudentByCount(count) {
        if (count === 15) return 600; // äººæ•¸ç­‰æ–¼ 15ï¼Œæ¯ä½å­¸ç”Ÿæ´¥è²¼600
        if (count >= 16 && count <= 20) return 600; // äººæ•¸ 16-20ï¼Œæ¯ä½å­¸ç”Ÿæ´¥è²¼ 600
        if (count >= 21 && count <= 25) return 700; // äººæ•¸ 21-25ï¼Œæ¯ä½å­¸ç”Ÿæ´¥è²¼ 700
        if (count >= 26) return 800; // äººæ•¸ >= 26ï¼Œæ¯ä½å­¸ç”Ÿæ´¥è²¼ 800
        return 0; // å…¶ä»–äººæ•¸ï¼Œæ¯ä½å­¸ç”Ÿæ´¥è²¼ 0
    }
    // ---------------------- ä¿®æ”¹éå…¨æœˆå­¸ç”Ÿäººæ•¸å°æ‡‰å€‹åˆ¥æ´¥è²¼çš„ç´šè·åˆ°é€™è£¡çµæŸ ----------------------

    function calculate() {
    const count = parseInt(document.getElementById("fullMonthCount").value);
    const teacher = document.getElementById("teacherName").value.trim();
    const workDays = parseInt(document.getElementById("workDays").value);
    const leaveDays = parseInt(document.getElementById("leaveDays").value) || 0;
    const leaveHours = parseInt(document.getElementById("leaveHours").value) || 0;
    const stipendRatio = parseFloat(document.getElementById("stipendRatio").value);

    if (isNaN(count) || count <= 0) {
        alert("âš ï¸ è«‹è¼¸å…¥æ­£ç¢ºçš„ã€å…¨æœˆäººæ•¸ã€‘ï¼");
        return;
    }
    if (isNaN(stipendRatio) || stipendRatio <= 0) {
        alert("âš ï¸ è«‹è¼¸å…¥å¤§æ–¼ 0 çš„ã€æ¯”ä¾‹ã€‘ï¼");
        return;
    }

    const baseStipend = getStipendByCount(count);
    const perStudentStipend = getPerStudentByCount(count);

    let total = baseStipend;
    let output = `è€å¸«ï¼š${teacher}\n`;  // åŠ å…¥è€å¸«å§“å
    output += `å…¨æœˆäººæ•¸ï¼š${count} äººï¼Œæ´¥è²¼ `;
    const percentageRatio = stipendRatio;
    const fullMonthStipendTimesRatio = Math.ceil(baseStipend * stipendRatio);

    if (stipendRatio !== 1) {
        total = fullMonthStipendTimesRatio;
        const formattedResult = fullMonthStipendTimesRatio.toFixed(0);
        output += `(${baseStipend} å…ƒ * æ¯”ä¾‹ ${percentageRatio.toFixed(3)}) = ${formattedResult} å…ƒ\n`;
    } else {
        const formattedResult = fullMonthStipendTimesRatio.toFixed(0);
        output += `(${baseStipend} å…ƒ * æ¯”ä¾‹ ${percentageRatio.toFixed(0)}) = ${formattedResult} å…ƒ\n`;
    }

    let nonFullCount = 0;
    let nonFullTotal = 0;

    for (let i = 0; i < 5; i++) {
        const name = document.getElementById(`name${i}`).value.trim();
        const days = parseInt(document.getElementById(`days${i}`).value);
        const totalDays = parseInt(document.getElementById(`totalDays${i}`).value);

        if (name && !isNaN(days) && !isNaN(totalDays) && days > 0 && totalDays > 0) {
            const partial = Math.ceil(perStudentStipend / totalDays * days);
            total += partial;
            nonFullCount++;
            nonFullTotal += partial;
            output += `+ ${name} (${perStudentStipend} Ã· ${totalDays} Ã— ${days}) = ${partial} å…ƒ\n`;
        }
    }

    output += `å°è¨ˆ ${Math.round(total)} å…ƒ\n\n`;

    if (workDays && (leaveDays > 0 || leaveHours > 0)) {
        const daily = total / workDays;
        const hourly = daily / 8;
        let leaveDeduction = 0;
        let deductionDescription = "";

        output += `-  ä»£èª²æ‰£é™¤ï¼š\n`;
        if (leaveDays > 0) {
            const daysDeduction = Math.floor(daily * leaveDays);
            leaveDeduction += daysDeduction;
            deductionDescription += `(${Math.round(total)} Ã· ${workDays} Ã— ${leaveDays})`;
            output += `-  ${leaveDays} å¤© ${deductionDescription} = ${daysDeduction} å…ƒ\n`;
        }

        if (leaveHours > 0) {
            const hoursDeduction = Math.floor(hourly * leaveHours);
            leaveDeduction += hoursDeduction;
            const hourDescription = `(${Math.round(total)} Ã· ${workDays} Ã· 8 Ã— ${leaveHours})`;
            output += `-  ${leaveHours} å°æ™‚ ${hourDescription} = ${hoursDeduction} å…ƒ\n`;
            if (deductionDescription) {
                deductionDescription += " + ";
            }
            deductionDescription += hourDescription;
        }
        output += `å…±æ‰£ ${leaveDeduction} å…ƒ\n\n`;
        total = Math.round(total) - leaveDeduction;
    }

    output += `= æœ¬æœˆå¸¶ç­æ´¥è²¼ç¸½é¡ï¼š${Math.round(total)} å…ƒ`;
    document.getElementById("result").innerText = output;
    }




    function copyResult() {
        const text = document.getElementById("result").innerText;
        if (text.trim() === "") {
            alert("âš ï¸ è«‹å…ˆè¨ˆç®—å¾Œå†è¤‡è£½ï¼");
            return;
        }
        navigator.clipboard.writeText(text).then(() => {
            alert("âœ… çµæœå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼");
        });
    }

    function toggleBlock(id) {
        const block = document.getElementById(id);
        if (block.style.display === 'none') {
            block.style.display = 'block';
        } else {
            block.style.display = 'none';
        }
    }
</script>

</body>
</html>
